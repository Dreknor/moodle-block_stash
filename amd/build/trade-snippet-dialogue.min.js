define(["core/templates","block_stash/dialogue-base","core/ajax","core/notification"],function(a,b,c,d){function e(a,c){this._trade=a,this._warnings=c,this.setTitle(a.get("name")),b.prototype.constructor.apply(this,[])}return e.prototype=Object.create(b.prototype),e.prototype.constructor=e,e.prototype._trade=null,e.prototype._warnings=null,e.prototype._render=function(){var b={trade:this._trade.getData(),tradejson:JSON.stringify(this._trade.getData()),warnings:this._warnings,haswarnings:this._warnings&&this._warnings.length};return c.call([{methodname:"block_stash_get_trade_items",args:{tradeid:this._trade.get("id")}}])[0].then(function(c){b.tradeitems=c,window.console.log(b),a.render("block_stash/trade_snippet_dialogue",b).then(function(b,c){this._setDialogueContent(b),this.center(),a.runTemplateJS(c)}.bind(this))}.bind(this))},e});