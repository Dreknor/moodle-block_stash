define(["jquery","core/yui","core/str","core/templates"],function(a,b,c,d){function e(){var c=a.Deferred();this._ready=c.promise(),b.use("moodle-core-notification",function(){this._init().then(function(){c.resolve()})}.bind(this))}return e.prototype._dialogue=null,e.prototype._ready=null,e.prototype._title="&hellip;",e.prototype.center=function(){this._dialogue.centerDialogue()},e.prototype._init=function(){var d,e=a.Deferred(),f=b.Node.create('<p style="text-align: center;"><img src="'+M.util.image_url("y/loading")+'" alt=""></p>');d=new M.core.dialogue({draggable:!0,modal:!0,width:"600px"}),this._dialogue=d;var g=d.hide;return d.hide=function(){g.apply(d,arguments),this.destroy()}.bind(d),d.getStdModNode(b.WidgetStdMod.HEADER).prepend(b.Node.create("<h1>")),this._updateDialogueTitle(),this._setDialogueContent(f),e.resolve(),this._render().fail(function(){c.get_string("error","core").then(function(a){return a}).fail(function(){return""}).always(function(a){this._setDialogueContent(a)}.bind(this))}.bind(this)),e.promise()},e.prototype.find=function(a){return this._container.find(a)},e.prototype._render=function(){},e.prototype.show=function(a){this._ready.then(function(){this._dialogue.show(a)}.bind(this))},e.prototype._setDialogueContent=function(a){this._dialogue.setStdModContent(b.WidgetStdMod.BODY,a,b.WidgetStdMod.REPLACE)},e.prototype.setTitle=function(a){this._title=a,this._updateDialogueTitle()},e.prototype._updateDialogueTitle=function(){this._dialogue&&this._dialogue.getStdModNode(b.WidgetStdMod.HEADER).one("h1").setHTML(this._title)},e});