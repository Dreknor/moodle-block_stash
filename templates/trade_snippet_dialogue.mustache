{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    Drop snippet dialogue.
}}
<div class="block-stash-trade-snippet-dialogue">
    <div>{{uniqid}}</div>
    <div>{{trade.name}}</div>
    <div class="block-stash-trade-items">
        <div>Item</div>
        {{#tradeitems}}
            <div class="item">
            {{#gainloss}}
            {{>block_stash/item_xsmall}} {{itemname}} ({{quantity}})
            {{/gainloss}}
            </div>
        {{/tradeitems}}
        <div>Cost</div>
        {{#tradeitems}}
            <div class="item">
            {{^gainloss}}
            {{>block_stash/item_xsmall}} {{itemname}} ({{quantity}})
            {{/gainloss}}
            </div>
        {{/tradeitems}}
    </div>
    <div>
        <p><strong>{{#str}}snippet, block_stash{{/str}}</strong></p>
        <textarea id="supertmep" name="snippet" onclick="this.select();" readonly></textarea>
        <p><small>{{#str}}copypaste, block_stash{{/str}}</small></p>
    </div>
</div>

{{#js}}
require([
    'jquery',
    'block_stash/trade',
    'block_stash/trade-snippet-maker'
], function($, Trade, TradeSnippetMaker) {
    var trade = new Trade({{{tradejson}}});
    var tsm = new TradeSnippetMaker(trade);
    var snippetbox = $('#supertmep');
    snippetbox.html(tsm.getSnippet());
});
{{/js}}